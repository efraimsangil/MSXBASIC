01 ' Sample40.bas
05 ' Juego simple para ver scroll horizonal y un sprite con físicas de movimiento y colision de sprites.
10 COLOR 15,2,2
20 'BLOAD "XBASIC.bin",R
30 'CALL TURBO ON
35 call speed(20)
40 SCREEN 2,2
50 RESTORE 820
60 FOR S=0 TO 8
70 A$=""
80 FOR I=1 TO 32
90 READ R
100 A$=A$+CHR$(R)
110 NEXT I
120 SPRITE$(S)=A$
130 NEXT S
140 LINE (15,15)-(175,175),4,BF
150 GOSUB 1080
160 FOR I=2 to 21: VPOKE &H1800+i, i MOD 2: VPOKE &H1800+i+32, (i+1) MOD 2: next i
170 FOR I=2 to 21: VPOKE &H1800+i+32*22, (i+1) MOD 2: VPOKE &H1800+i+32*23, i MOD 2:next i
180 V=0: A=.05: Y=100: T=0:aa=0:ab=1
190 PX=175
200 P2=260
210 BS=0
220 SPRITE ON:ON SPRITE GOSUB 630
230 ' ********************
240 ' *    GAME LOOP     *
250 ' ********************
260 PUTSPRITE 0,(50,Y),11,BS\4
270 J=STICK(0)
280 IF J=1 THEN V=-1:T=0
290 Y=Y+V+A*T
300 T=T+1
310 BS=BS+1
320 IF BS=16 THEN BS=0
330 'REMAP THE BRICKS
340 aa=aa*2:ab=ab*2
350 if aa=256 THEN aa=0:ab=1
360 if ab=256 THEN ab=0:aa=1
370 VPOKE 1, aa: VPOKE 4097, aa: VPOKE 9, ab: VPOKE 4105, ab
380 VPOKE 2, aa: VPOKE 4098, aa: VPOKE 10, ab: VPOKE 4106, ab
390 VPOKE 3, aa: VPOKE 4099, aa: VPOKE 11, ab: VPOKE 4107, ab
400 VPOKE 4, aa: VPOKE 4100, aa: VPOKE 12, ab: VPOKE 4108, ab
410 VPOKE 5, aa: VPOKE 4101, aa: VPOKE 13, ab: VPOKE 4109, ab
420 VPOKE 6, aa: VPOKE 4102, aa: VPOKE 14, ab: VPOKE 4119, ab
430 ' PIPE MOVEMENT
440 PX=PX-1
450 PUTSPRITE 1,(PX,15),2,8
460 PUTSPRITE 2,(PX,31),2,5
470 PUTSPRITE 3,(PX,47),2,8
480 PUTSPRITE 4,(PX,63),2,7
490 PUTSPRITE 5,(PX,143),2,6
500 PUTSPRITE 6,(PX,159),2,5
510 IF PX<=0 THEN PX=175
520 P2=P2-1 
530 PUTSPRITE 7,(P2,15),2,8
540 PUTSPRITE 8,(P2,31),2,7
550 PUTSPRITE 9,(P2,111),2,6
560 PUTSPRITE 10,(P2,127),2,5
570 PUTSPRITE 11,(P2,143),2,8
580 PUTSPRITE 12,(P2,159),2,5
590 IF P2<=0 THEN P2=175
600 IF Y>=159 THEN GOTO 630
610 IF Y<=15 THEN GOTO 630
620 GOTO 230
630 ' ********************
640 ' *    GAME OVER     *
650 ' ********************
660 SPRITE OFF
670 V=-4:T=0
680 PUTSPRITE 0,(50,Y),11,4
690 Y=Y+V+A*T
700 T=T+1 
710 IF Y>=175 THEN GOTO 730
720 GOTO 680
730 ' ********************
740 ' *  START NEW GAME  *
750 ' ********************
760 'PRESS SPACE TO START
770 GOTO 330
780 ' ********************
790 ' *    SPRITE DATA   *
800 ' ********************
810 ' --- Bird 1
820 DATA &H07,&H1F,&H3F,&H7F,&HFF,&HDF,&HDF,&HEF,&HEF,&H70,&H3F,&H1F,&H1F,&H1F,&H3B,&H36
830 DATA &H00,&HF0,&HFC,&HFE,&HB3,&HA5,&HA5,&HB3,&H7F,&HFE,&HFC,&HF8,&HE0,&H80,&H00,&H00
840 ' --- Bird 2
850 DATA &H00,&H07,&H1F,&H3F,&H7F,&HE7,&HDF,&HDF,&HE0,&HFF,&H7F,&H3F,&H1F,&H1F,&H3B,&H36
860 DATA &H00,&HC0,&HF0,&HFC,&H7E,&HB3,&HA5,&H65,&HF3,&HFF,&HFE,&HFC,&HF8,&HE0,&H00,&H00
870 ' --- Bird 3
880 DATA &H00,&H07,&H1F,&H30,&H6F,&HDF,&HDF,&HDF,&HFF,&HFF,&H7F,&H3F,&H1F,&H1F,&H3B,&H36
890 DATA &H00,&HC0,&HF0,&HFC,&H7E,&HB3,&HA5,&HE5,&HF3,&HFF,&HFE,&HFC,&HF8,&HE0,&H00,&H00
900 ' --- Bird 4
910 DATA &H00,&H00,&H00,&H0F,&H1F,&H5F,&HDF,&HDF,&HDF,&HFF,&HFF,&H7F,&H3F,&H1F,&H3B,&H36
920 DATA &H00,&H00,&HC0,&H70,&HBC,&HBE,&HB3,&HA5,&HE5,&HF3,&HFF,&HFE,&HFC,&HF8,&HE0,&H00
930 ' --- Bird dead
940 DATA &H10,&H47,&H1F,&HBF,&H70,&HEF,&HDF,&HDF,&HEF,&HF7,&H7F,&H3F,&H1F,&H9F,&H3B,&H36
950 DATA &H28,&HC2,&HF8,&HFC,&HF2,&H61,&HA5,&HA5,&HA1,&HF2,&HFC,&H80,&H71,&HC0,&H02,&H28
960 ' --- Pipe middle 1
970 DATA &H0F,&H2F,&H6F,&H6F,&H2B,&H0F,&H0F,&H0E,&H4F,&HEF,&HF3,&H7D,&H3D,&H03,&H0F,&H0F
980 DATA &HA0,&HD2,&H77,&HEF,&HDE,&HDC,&HE0,&HD0,&HE0,&HD0,&HE4,&HD6,&HE6,&HD4,&H60,&HD0
990 ' --- Pipe end top
1000 DATA &H00,&H07,&H0F,&H0F,&H07,&H09,&H0E,&H0F,&H0F,&H2F,&H73,&H7D,&H3D,&H03,&H0F,&H0F
1010 DATA &H00,&H00,&HE0,&HF0,&H90,&H70,&H60,&H50,&HE0,&H70,&HE4,&H56,&HE6,&HD4,&H60,&HD0
1020 ' --- Pipe end bottom
1030 DATA &H0F,&H0E,&H6F,&HEF,&HF3,&H7D,&H3D,&H1A,&H0F,&H0E,&H0F,&H0D,&H00,&H0F,&H07,&H03
1040 DATA &HD0,&HF6,&HDF,&H6F,&HDE,&HEC,&HD0,&HE0,&HD0,&HE0,&HD0,&HE0,&HD0,&H20,&HF0,&HE0
1050 ' --- Pipe middle 2
1060 DATA &H0F,&HCE,&HEF,&HF3,&H7D,&H3D,&H03,&H0F,&H0B,&H0F,&H0F,&H2F,&H6F,&H6F,&H2D,&H0F
1070 DATA &HD0,&HE0,&HD0,&HE0,&HD0,&HE0,&HD0,&H60,&HD0,&HA0,&HD6,&H67,&HAF,&H5E,&HDC,&HE0
1080 VPOKE &H1800, 2:VPOKE &H1801, 2: VPOKE &H1800+512, 22: VPOKE &H1800+513, 22
1090 FOR I=0 to 15: READ R:VPOKE i, R: VPOKE &H2000+i, &H68:VPOKE 4096+i, R: VPOKE &H2000+4096+i, &H68:next i
1100 return
1110 DATA &HFF,&H01,&H01,&H01,&H01,&H01,&H01,&HFF
1120 DATA &HFF,&H00,&H00,&H00,&H00,&H00,&H00,&HFF
