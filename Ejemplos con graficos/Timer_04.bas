10 SET BEEP 1,4
20 BLOAD"XBASIC.BIN",R:_TURBO ON
30 DEFINTA-Z:DIM T(4):COLOR 15,0,0:FOR I=0 TO 255:VPOKE&H800+I,0:NEXT I
40 VDP(13)=&HF4:VDP(14)=&HF0
50 IF PEEK(&HD003)=13THEN T(1)=PEEK(&HD000):T(2)=PEEK(&HD001):T(3)=PEEK(&HD002)
60 Y=1:MX=99:CLS:PRINT"Setup timer":VPOKE&H80B,224
70 PRINT"Hours  :";T(1):PRINT"Minutes:";T(2):PRINT"Seconds:";T(3)
80 'A=STICK(0):T(Y)=T(Y)-((A=3)AND(T(Y)0))
85 A=STICK(0):T(Y)=T(Y)-((A=3)AND(T(Y)<MX))+((A=7)AND(T(Y)>0))
90 IF INKEY$=CHR$(13) THEN VPOKE&H800+Y*10+1,0:Y=Y+1:IF Y<4 THEN MX=59:VPOKE&H800+Y*10+1,224 ELSE 120
100 TIME=0
110 IF TIME<6 GOTO 110 ELSE LOCATE 8,Y:PRINTT(Y):GOTO 80
120 CLS:POKE&HD003,13:POKE&HD000,T(1):POKE&HD001,T(2):POKE&HD002,T(3)
130 H$=STR$(T(1)):M$=STR$(T(2)):S$=STR$(T(3))
140 IF LEN(H$)<3 THEN H$="0"+RIGHT$(H$,1) ELSE H$=RIGHT$(H$,2)
150 IF LEN(M$)<3 THEN M$="0"+RIGHT$(M$,1) ELSE M$=RIGHT$(M$,2)
160 IF LEN(S$)<3 THEN S$="0"+RIGHT$(S$,1) ELSE S$=RIGHT$(S$,2)
170 IF T(1)=0 AND T(2)=0 AND T(3)<10 THEN BEEP:COLOR 15,6,6
180 O$=H$+":"+M$+":"+S$:FOR Y=0TO7:Y1=Y*80
190 FOR X=1TOLEN(O$):CH=ASC(MID$(O$,X,1))
200 MS=128:CD=PEEK(&H1BBF+CH*8+Y):X1=X*8
210 FOR I=0TO7:IF CD AND MS THEN C=CH ELSE C=0
220 VPOKEY1+X1+I,C:MS=MS/2:NEXT I
230 IF STRIG(0) GOTO 280 ELSE NEXT X,Y
240 TM=TIME/60:IF TM=OT GOTO 240 ELSE OT=TM
250 T(3)=T(3)-1:IF T(3)>=0 GOTO 130 ELSE T(3)=59
260 T(2)=T(2)-1:IF T(2)>=0 GOTO 130 ELSE T(2)=59
270 T(1)=T(1)-1:IF T(1)>=0 GOTO 130
280 FOR I=0 TO 10:BEEP:NEXT I:CLS:COLOR 15,0,0
290 _TURBO OFF
